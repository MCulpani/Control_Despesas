<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Gest√£o de Despesas Operacionais</title>

<style>
body{margin:0;font-family:Arial,Helvetica,sans-serif;background:#0f172a;color:#e5e7eb}
header{background:#020617;padding:14px 20px;display:flex;justify-content:space-between;align-items:center}
header button{margin-left:6px;padding:8px 14px;border:none;border-radius:8px;background:#38bdf8;font-weight:bold;cursor:pointer}
main{padding:20px}
.card{background:#111827;border-radius:14px;padding:18px;margin-bottom:20px}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:16px}
label{font-size:12px;color:#9ca3af}
input,select{width:100%;min-height:42px;padding:10px;border-radius:8px;border:1px solid #374151;background:#020617;color:#e5e7eb}
button.action{margin-top:16px;padding:12px;border:none;border-radius:10px;background:#22c55e;font-weight:bold;cursor:pointer}
table{width:100%;border-collapse:collapse;font-size:13px;text-align:center}
th,td{padding:10px;border-bottom:1px solid #1f2933}
.badge{padding:4px 8px;border-radius:6px;font-size:11px;font-weight:bold}
.ok{background:#14532d;color:#22c55e}
.pending{background:#422006;color:#facc15}
a{color:#38bdf8;text-decoration:none}
.action-btn{padding:6px 10px;border:none;border-radius:6px;cursor:pointer;font-size:12px}
.edit{background:#facc15;color:#000}
.delete{background:#ef4444;color:#fff}
</style>
</head>
<body>

<header>
  <h3>üìä Gest√£o de Despesas</h3>
  <div>
    <button onclick="mostrar('cadastro')">Nova</button>
    <button onclick="mostrar('despesas')">Despesas</button>
  </div>
</header>

<main>

<section id="cadastro" class="card">
<h3>Nova Despesa</h3>
<div class="grid">
  <div><label>Raz√£o Social</label><input id="razao"></div>
  <div><label>NF Cliente</label><input id="nfCliente"></div>
  <div><label>UF</label><input id="uf"></div>
  <div><label>Valor NF</label><input type="number" id="valorNFS"></div>
  <div><label>Valor DT</label><input type="number" id="valorDT"></div>
  <div><label>Tipo Ve√≠culo</label><select id="tipoVeiculo"><option>Truck</option><option>Carreta</option><option>Bitrem</option><option>Rodotrem</option><option>VUC</option></select></div>
  <div><label>N√∫mero DT</label><input id="numeroDT"></div>
  <div><label>Vencimento</label><input type="date" id="dataVencimento"></div>
  <div><label>Cliente</label><input id="cliente"></div>
  <div><label>Tipo Servi√ßo</label><select id="tipoServico"><option>Taxa de Embarque</option><option>Taxa de Desembarque</option><option>Armazenagem</option><option>Descarga Manual</option><option>Redespacho</option></select></div>
  <div><label>Status</label><select id="status"><option>Pendente</option><option>Aprovado</option></select></div>
  <div><label>Nota Fiscal</label><input type="file" id="nota"></div>
</div>
<button class="action" onclick="salvar()">Salvar</button>
</section>

<section id="despesas" class="card" style="display:none">
<h3>Despesas</h3>
<table>
<thead>
<tr>
<th>Raz√£o</th><th>NF</th><th>UF</th><th>Valor NF</th><th>Status</th><th>A√ß√µes</th>
</tr>
</thead>
<tbody id="tbody"></tbody>
</table>
</section>

</main>

<script>
let despesas = JSON.parse(localStorage.getItem('despesas')||'[]');
let editIndex = null;

function mostrar(id){
  cadastro.style.display='none';
  despesasSection.style.display='none';
  document.getElementById(id).style.display='block';
  if(id==='despesas') render();
}

const despesasSection = document.getElementById('despesas');

function salvar(){
  const registro = {
    razao:razao.value,
    nfCliente:nfCliente.value,
    uf:uf.value,
    valorNFS:valorNFS.value,
    status:status.value
  };

  if(editIndex !== null){
    despesas[editIndex] = registro;
    editIndex = null;
  } else {
    despesas.push(registro);
  }

  localStorage.setItem('despesas',JSON.stringify(despesas));
  alert('Salvo com sucesso');
}

function editar(i){
  const d = despesas[i];
  razao.value = d.razao;
  nfCliente.value = d.nfCliente;
  uf.value = d.uf;
  valorNFS.value = d.valorNFS;
  status.value = d.status;
  editIndex = i;
  mostrar('cadastro');
}

function excluir(i){
  if(confirm('Deseja excluir esta despesa?')){
    despesas.splice(i,1);
    localStorage.setItem('despesas',JSON.stringify(despesas));
    render();
  }
}

function render(){
  tbody.innerHTML='';
  despesas.forEach((d,i)=>{
    tbody.innerHTML+=`
    <tr>
      <td>${d.razao}</td>
      <td>${d.nfCliente}</td>
      <td>${d.uf}</td>
      <td>${d.valorNFS}</td>
      <td><span class="badge ${d.status==='Aprovado'?'ok':'pending'}">${d.status}</span></td>
      <td>
        <button class="action-btn edit" onclick="editar(${i})">Editar</button>
        <button class="action-btn delete" onclick="excluir(${i})">Excluir</button>
      </td>
    </tr>`;
  });
}
</script>

</body>
</html>
